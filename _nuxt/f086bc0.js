(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{881:function(e,t,n){"use strict";n.r(t);n(641);var r=n(885),o=n.n(r),c=n(92),l={components:{Identicon:o.a},props:{address:{type:String,default:function(){return""}},size:{type:Number,default:function(){return 20}}},data:function(){return{config:c.a}},methods:{showToast:function(){this.$bvToast.toast(this.address,{title:"Address copied to clipboard!",variant:"secondary",autoHideDelay:5e3,appendToast:!1})}}},d=n(146),component=Object(d.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-inline",attrs:{title:"Click to copy validator address to clipboard"},on:{click:this.showToast}},[t("Identicon",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:this.address,expression:"address",arg:"copy"}],key:this.address,staticClass:"identicon",attrs:{size:this.size,theme:this.config.identiconTheme,value:this.address}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Identicon:n(881).default})},882:function(e,t,n){"use strict";n.r(t);var r={props:{size:{type:String,default:function(){return"md"}}}},o=n(146),component=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Verified identity"}},[t("font-awesome-layers",{class:"fa-"+this.size+" align-middle verified"},[t("font-awesome-icon",{staticClass:"circle",attrs:{icon:"circle"}}),this._v(" "),t("font-awesome-icon",{attrs:{icon:"check",transform:"shrink-6"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},883:function(e,t,n){"use strict";n.r(t);var r={},o=n(146),component=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",{staticClass:"loading text-center"},[this._v("\n    data collection may take around 2 minutes to complete, please be patient\n  ")]),this._v(" "),t("text-typing",{staticClass:"pt-3 text-center",attrs:{texts:["Fetching chain data..."],speed:100,delay:3e3,"fixed-text-class":"text-white","dynamic-text-class":"text-teal-200","caret-class":"text-white"}})],1)}),[],!1,null,null,null);t.default=component.exports},958:function(e,t,n){"use strict";n.r(t);n(43),n(37),n(51),n(254),n(68),n(63),n(73),n(295),n(52),n(205);var r=n(81),o=n(196),c=n(952),l=n(616),d=n(866),f=n(49),h=n(926),v=n(928),m=n(955),x=n(881),_=n(488),A=n(92),k={components:{Identicon:x.default,Promised:m.a},mixins:[_.a,h.validationMixin],data:function(){return{config:A.a,favorites:[],detectedExtension:!1,extensionAccounts:[],extensionAddresses:[],selectedAccount:null,selectedAddress:null,tranferableBalance:0,api:null,enableWeb3:!1,error:null,amount:0,extrinsicHash:null,extrinsicStatus:null,blockHash:null,success:null,noAccountsFound:!0,addressRole:null,onGoingElection:!1,clusterAlert:!1}},head:function(){return{title:"Nominate | ".concat(this.config.title," for ").concat(this.capitalize(this.config.name)),meta:[{hid:"description",name:"description",content:"Nominate selected validators"}]}},computed:{loading:function(){return this.$store.state.ranking.loading},list:function(){var e=this,t=this.$store.state.ranking.list.filter((function(t){var n=t.stashAddress;return e.selectedAddresses.includes(n)})),n=this;return t.forEach((function(e){t.filter((function(t){return t.clusterName===e.clusterName})).length>1&&(n.clusterAlert=!0)})),t},selectedAddresses:function(){return this.$store.state.ranking.selectedAddresses}},validations:{selectedAddress:{required:v.required}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.$store.state.ranking.list.length){t.next=3;break}return t.next=3,e.$store.dispatch("ranking/update");case 3:return t.next=5,Object(c.web3Enable)("".concat(A.a.title," for ").concat(e.capitalize(A.a.name))).then((function(){Object(c.web3Accounts)().then((function(t){var n=new l.WsProvider(A.a.nodeWs);d.a.create({provider:n}).then((function(n){e.api=n,e.getElectionStatus(),t.length>0&&(e.detectedExtension=!0,e.extensionAccounts=t,t.forEach((function(t){return e.extensionAddresses.push(Object(f.encodeAddress)(t.address,A.a.addressPrefix))})),e.extensionAccounts.length>0&&e.extensionAddresses.length>0?(e.selectedAccount=e.extensionAccounts[0],e.selectedAddress=e.extensionAddresses[0],e.getAccountInfo(e.selectedAddress),e.noAccountsFound=!1):e.noAccountsFound=!0)}))})).catch((function(e){console.log("Error: ",e)}))})).catch((function(e){console.log("Error: ",e)}));case 5:e.enableWeb3=t.sent;case 6:case"end":return t.stop()}}),t)})))()},methods:{validateState:function(e){var t=this.$v[e],n=t.$dirty,r=t.$error;return n?!r:null},onSubmit:function(e){e.preventDefault(),this.$v.$touch(),this.$v.$invalid||this.nominate()},getAccountInfo:function(address){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.derive.balances.all(address);case 2:return n=t.sent,r=n.availableBalance,e.tranferableBalance=new o.BigNumber(r),t.next=7,e.getAddressRole(address);case 7:e.addressRole=t.sent;case 8:case"end":return t.stop()}}),t)})))()},getAddressRole:function(address){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.query.staking.bonded(address);case 2:if(!(n=t.sent).toString()||n.toString()!==address){t.next=7;break}return t.abrupt("return","stash/controller");case 7:if(!n.toString()||n.toString()===address){t.next=11;break}return t.abrupt("return","stash");case 11:return t.next=13,e.api.query.staking.ledger(address);case 13:if(!t.sent.toString()){t.next=18;break}return t.abrupt("return","controller");case 18:return t.abrupt("return","none");case 19:case"end":return t.stop()}}),t)})))()},getBlockNumber:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.api.rpc.chain.getHeader(e);case 2:return r=n.sent,o=r.number,n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)})))()},getElectionStatus:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.query.staking.eraElectionStatus();case 2:n=t.sent,e.onGoingElection=n.isOpen;case 4:case"end":return t.stop()}}),t)})))()},nominate:function(){var e=this;this.selectedAccount=Object(f.encodeAddress)(this.selectedAddress,42),Object(c.web3FromAddress)(this.selectedAccount).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.api.setSigner(n.signer),t.next=3,e.api.query.system.account(e.selectedAddress);case 3:return r=t.sent,o=r.nonce,t.next=7,e.api.tx.staking.nominate(e.selectedAddresses).signAndSend(e.selectedAccount,{nonce:o},(function(t){t.events;var n=t.status;e.extrinsicStatus=n.type,n.isInBlock?e.extrinsicHash=n.asInBlock.toHex():n.isFinalized&&(e.blockHash=n.asFinalized.toHex())}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("Error: ",e)}))},remove:function(e){this.$store.dispatch("ranking/toggleSelected",{accountId:e})},selectAddress:function(e){this.selectedAddress=e}}},w=n(146),component=Object(w.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"page py-5"},[n("h1",{staticClass:"mb-4"},[e._v("Nominate selected")]),e._v(" "),e.loading?n("div",[n("Loading")],1):e.detectedExtension?e.noAccountsFound?n("div",[n("b-alert",{attrs:{variant:"warning",show:""}},[n("i",{staticClass:"fa fa-frown-o"}),e._v(" No accounts found, open Polkadot JS\n      extension and import your account/s before proceed\n    ")])],1):e.onGoingElection?n("div",[n("b-alert",{attrs:{variant:"warning",show:""}},[n("i",{staticClass:"fa fa-frown-o"}),e._v(" There is currently an ongoing election for\n      new validator candidates. As such staking operations are not permitted\n    ")])],1):n("div",[n("b-form",{staticClass:"mt-2",on:{submit:e.onSubmit}},[n("b-form-group",{staticClass:"w-100 pt-4",attrs:{id:"input-group-from",label:"Select your controller address:","label-for":"input-from"}},[n("b-dropdown",{staticClass:"py-2",attrs:{block:"","menu-class":"w-100",state:e.validateState("selectedAddress"),"aria-describedby":"selectedAddress-feedback",text:e.selectedAddress},on:{change:function(t){return e.getAccountInfo(e.selectedAddress)}}},e._l(e.extensionAddresses,(function(t){return n("b-dropdown-item",{key:t,on:{click:function(n){e.selectAddress(t),e.getAccountInfo(e.selectedAddress)}}},[n("div",[n("Identicon",{attrs:{address:t}}),e._v("\n              "+e._s(t)+"\n            ")],1)])})),1),e._v(" "),n("div",{staticClass:"controller-address-validation"},[e.tranferableBalance?n("p",{staticClass:"ml-2 mb-0 mt-1",class:{"text-danger":!(e.tranferableBalance>0),"text-success":e.tranferableBalance>0}},[e._v("\n            Transferable balance:\n            "+e._s(e.formatAmount(e.tranferableBalance))+"\n            "),e.tranferableBalance>0?n("span",[n("font-awesome-icon",{attrs:{icon:"check"}})],1):e._e()]):e._e(),e._v(" "),e.addressRole?n("p",{staticClass:"ml-2 mb-0 mt-1",class:{"text-danger":"controller"!==e.addressRole&&"stash/controller"!==e.addressRole,"text-success":"controller"===e.addressRole||"stash/controller"===e.addressRole}},["none"===e.addressRole?n("span",[e._v("\n              Address is not a controller\n            ")]):n("span",[e._v("\n              Address is a\n              "+e._s(e.addressRole)+"\n            ")]),e._v(" "),"controller"===e.addressRole||"stash/controller"===e.addressRole?n("span",[n("font-awesome-icon",{attrs:{icon:"check"}})],1):e._e()]):e._e()]),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"selectedAddress-feedback"}},[e._v("Please install Polkadot JS extension\n        ")]),e._v(" "),n("p",{staticClass:"pt-4"},[e._v("Target validators:")]),e._v(" "),e._l(e.list,(function(t){return n("div",{key:t.stashAddress,staticClass:"row pb-1"},[n("div",{staticClass:"col-10"},[n("Identicon",{attrs:{address:t.stashAddress,size:20}}),e._v(" "),n("nuxt-link",{attrs:{to:"/validator/"+t.stashAddress}},[t.name?n("span",[e._v("\n                "+e._s(t.name)+"\n                "),n("VerifiedIcon")],1):n("span",[e._v("\n                "+e._s(e.shortAddress(t.stashAddress))+"\n              ")])])],1),e._v(" "),n("div",{staticClass:"col-2 text-right"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"remove",attrs:{href:"#",title:"Remove"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.remove(t.stashAddress)}}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1)])])}))],2),e._v(" "),e.extrinsicHash&&"Finalized"===e.extrinsicStatus?n("b-alert",{staticClass:"text-center",attrs:{variant:"success",fade:"",show:""}},[n("h4",[e._v(e._s(e.extrinsicStatus)+" transaction!")]),e._v(" "),n("p",[e._v("\n          Extrinsic with hash "+e._s(e.extrinsicHash)+" was included in block\n          "),n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"https://kusama.polkastats.io/block/"+e.blockHash,title:"Check block information",target:"_blank"}},[n("Promised",{attrs:{promise:e.getBlockNumber(e.blockHash)},scopedSlots:e._u([{key:"default",fn:function(data){return[e._v("#"+e._s(e.formatNumber(data)))]}}],null,!1,2268764862)})],1)])]):e.extrinsicHash&&e.extrinsicStatus&&"Finalized"!==e.extrinsicStatus?n("b-alert",{staticClass:"text-center",attrs:{variant:"info",fade:"",show:""}},[n("h4",[e._v("Transaction hash "+e._s(e.extrinsicHash))]),e._v(" "),n("p",[e._v("Transaction status: "+e._s(e.extrinsicStatus))])]):e._e(),e._v(" "),e.clusterAlert?n("b-alert",{attrs:{variant:"warning",show:"",dismissible:""}},[e._v("\n        You have more than one member of the same cluster in your set. If\n        there is a slash for a cluster operator, chances are high that many\n        cluster members are affected and super-linear slashing occurs\n      ")]):e._e(),e._v(" "),n("b-button",{staticClass:"btn-block mt-3",attrs:{type:"submit",variant:"outline-primary2",disabled:e.noAccountsFound||!e.tranferableBalance>0||!("controller"===e.addressRole||"stash/controller"===e.addressRole)}},[e._v("\n        Nominate\n      ")])],1)],1):n("div",[n("b-alert",{attrs:{variant:"warning",show:""}},[n("i",{staticClass:"fa fa-frown-o"}),e._v(" "),n("a",{attrs:{href:"https://github.com/polkadot-js/extension",target:"_blank"}},[e._v("Polkadot JS extension")]),e._v("\n      not found, please install it and import your account/s before proceed\n    ")])],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Loading:n(883).default,Identicon:n(881).default,VerifiedIcon:n(882).default})}}]);